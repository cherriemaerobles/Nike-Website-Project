<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products</title>
    <link rel="stylesheet" href="menstyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
   </head>
<script src="cart.js"></script>

</head>
<body>
    <!-- Header -->
    <header>
        <div class="navbar-container">
            <div class="logo">
                <h1>Nike</h1>
            </div>
            <div class="navbar-links">
                <a href="index.html">Home</a>
                <a href="#Products">About</a>
                <a href="#Categories">Categories</a>
                <a href="#Contact">Contact Us</a>
            </div>
            <div class="action-buttons">
                <i class="fa-solid fa-heart">
                    <span class="favorite-badge">0</span> <!-- Badge showing the favorite count -->
                </i>
                <i class="fa-solid fa-cart-shopping"></i> <!-- Cart Icon -->
                <i class="fa-solid fa-user"></i> <!-- User Icon -->
            </div>
            
    </header>

    <div class="navbar-subtitle">
        <h2>Men's Shoes</h2>
    </div>
    <section class="products-container" id="Products">
        <!-- Product boxes go here -->
    </section>

    <!-- Products Section -->
    <div class="box-container">
        <div class="containerProduct">
            <div class="row" id="product-cards-container">
                <!-- Product Cards will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- Product Description Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="productTitle"></h2>
            <div id="productDescription"></div>
            <div class="price" id="productPrice"></div>
            <button class="btn add-cart">Add to Cart</button>
            <br>
            <button class="btn add-fav">Favorite</button>
        </div>
    </div>

       <!-- Favorites Modal -->
       <div id="favoritesModal" class="modal">
        <div class="modal-content">
            <span class="close" id="favoritesClose">&times;</span>
            <h2>Favorite Products</h2>
            <div id="favoritesContainer">
                <!-- Favorited products will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <span class="close" id="cartClose">&times;</span>
            <h2>Cart</h2>
            <div id="cartContainer">
                <!-- Cart products will be dynamically inserted here -->
            </div>
            <div style="margin-top: 20px;">
                <strong>Total:</strong> <span id="cartTotal">₱0</span>
            </div>
            <buttons id="checkoutButton" class="btn add-cart" style="margin-top: 20px; width: 100%;">Checkout</buttons>
        </div>
    </div>


    <!-- Footer -->
    <footer>
        <div class="container text-center">
            <p>© 2024 NIKE</p>
            <div class="social-icons">
                <a href="#"><i class="fab fa-facebook"></i></a>
                <a href="#"><i class="fab fa-instagram"></i></a>
                <a href="#"><i class="fab fa-twitter"></i></a>
                <a href="#"><i class="fab fa-youtube"></i></a>
            </div>
        </div>
    </footer>

    <script>
        const products = [
            {
                id: 1,
                name: "Nike Air Force 1 '07",
                image: "Shoes/men shoes 1.jpg",
                price: "₱6,195",
                description: "The radiance lives on with the b-ball original. Crossing hardwood comfort with off-court flair, it puts a fresh spin on what you know best: '80s-inspired construction, bold details and nothin'-but-net style."
            },
            {
                id: 2,
                name: "Nike Court Vision Low",
                image: "Shoes/men shoes 2.jpg",
                price: "₱3,695",
                description: "A classic remixed, its crisp upper and stitched overlays keep the soul of the original style. The plush, low-cut collar keeps it sleek and comfortable for your world."
            },
            {
                id: 3,
                name: "Air Jordan 3 Retro",
                image: "Shoes/men shoes 3.jpg",
                price: "₱11,295",
                description: "Quality leather in the upper—with that luxurious elephant print texture—is combined with visible Air in the sole to make a comfortable, everyday icon. Fire-red details burn through, giving you one hot look."
            },
            {
                id: 4,
                name: "Kobe 9 Elite Low Protro",
                image: "Shoes/men shoes 4.jpg",
                price: "₱11,295",
                description: "The Kobe 9 Elite Protro 'Halo' is a symbol of Kobe's dedication to always getting better—and it's our challenge to hoopers to push your game to new levels. Proving that even a masterpiece can be improved on, the addition of Nike React in the midsole means greater responsiveness that'll have you feeling connected to the court."
            },
            {
                id: 5,
                name: "Nike V2K Run",
                image: "Shoes/men shoes 5.jpg",
                price: "₱6,895",
                description: "The Air Jordan 1 Mid combines heritage style with modern details, offering the perfect blend of comfort and style.  <br><br> <strong>Colour Shown:</strong> Red Stardust <br><strong>Style:</strong> HF0782-101 <br><strong>Country/Region of Origin:</strong> Vietnam"
            },
            {
                id: 6,
                name: "Nike Air Max Plus",
                image: "Shoes/men shoes 6.jpg",
                price: "₱5,639",
                description: "he V2K remasters everything you love about the Vomero in a look pulled straight from an early '00s running catalogue. Layer up in a mixture of flashy metallics, referential plastic details and a midsole with a perfectly vintage aesthetic.  <br><br> <strong>Colour Shown:</strong> Red Stardust <br><strong>Style:</strong> HF0782-101 <br><strong>Country/Region of Origin:</strong> Vietnam"
            },
            {
                id: 7,
                name: "Sabrina 2 EP",
                image: "Shoes/men shoes 7.jpg",
                price: "₱7,395",
                description: "Our newest Cushlon foam helps keep you fresh, Air Zoom cushioning adds the pop and sticky traction helps you create that next-level distance. Sabrina's handed you the tools. Time to go to work. With its extra-durable rubber outsole, this version gives you traction for outdoor courts.  <br><br> <strong>Colour Shown:</strong> Red Stardust <br><strong>Style:</strong> HF0782-101 <br><strong>Country/Region of Origin:</strong> Vietnam"
            },
            {
                id: 8,
                name: "Air Foamposite One",
                image: "Shoes/men shoes 8.jpg",
                price: "₱12,295",
                description: "Rare, classic and way ahead of its time, it's a testament to Penny Hardaway's unforgettable game—and one of the boldest looks to move off court. The striking Metallic Copper colourway brings the heat, while its distinctive liquid-like design boosts the cool factor. The finishing touch? Penny's signature 1 cent logo delivers the slick assist.  <br><br> <strong>Colour Shown:</strong> Red Stardust <br><strong>Style:</strong> HF0782-101 <br><strong>Country/Region of Origin:</strong> Vietnam"
            }
        ];

        const productCardsContainer = document.getElementById('product-cards-container');
    const modal = document.getElementById('productModal');
    const closeModal = document.querySelector('.close');

    let favoriteCount = 0;
    const favoritedProducts = [];

    const updateFavoriteCounter = () => {
        const heartIcon = document.querySelector('.fa-heart');
        const favoriteBadge = heartIcon.querySelector('.favorite-badge');
        favoriteBadge.textContent = favoriteCount;
    };

    const displayFavorites = () => {
        alert("Favorite Products:\n" + favoritedProducts.map(id => {
            const product = products.find(p => p.id === id);
            return product ? product.name : '';
        }).join('\n') || "No favorites yet!");
    };

    // Create product cards dynamically
    products.forEach((product, index) => {
        const productCard = document.createElement('div');
        productCard.classList.add('col-md-4', 'col-lg-3');
        productCard.innerHTML = `
            <div class="box">
                <img src="${product.image}" alt="${product.name}">
                <h3>${product.name}</h3>
                <div class="price">${product.price}</div>
                <button class="btn add-cart">Add to Cart</button>
                <button class="btn view-details" data-index="${index}">Details</button>
            </div>
        `;
        productCardsContainer.appendChild(productCard);
    });

    // Show product details in the modal when the Details button is clicked
    document.querySelectorAll('.btn.view-details').forEach(button => {
        button.addEventListener('click', (event) => {
            const productIndex = event.target.getAttribute('data-index');
            const product = products[productIndex];

            // Show the product details inside the modal
            document.getElementById('productTitle').textContent = product.name;
            document.getElementById('productDescription').innerHTML = product.description;
            document.getElementById('productPrice').textContent = product.price;

            // Show the modal
            modal.style.display = "block";

            // Add functionality for the Add to Favorites button inside the modal
            const addToFavButton = document.querySelector('.btn.add-fav');
            addToFavButton.onclick = () => {
                if (favoritedProducts.includes(product.id)) {
                    alert("You have already added this product to favorites.");
                    return;
                }

                favoritedProducts.push(product.id); // Add product to favorites
                favoriteCount++; // Increment favorite count
                updateFavoriteCounter(); // Update the favorite count display
                alert("Product added to favorites!");
            };
        });
    });

    // Close the modal when the close button is clicked
    closeModal.addEventListener('click', () => {
        modal.style.display = "none";
    });

    // Close the modal if the user clicks outside of the modal content
    window.addEventListener('click', (event) => {
        if (event.target === modal) {
            modal.style.display = "none";
        }
    });

    
    // Add click event listener to the heart icon
    const heartIcon = document.querySelector('.fa-heart');
    heartIcon.addEventListener('click', displayFavorites);

    const favoritesModal = document.getElementById('favoritesModal');
    const favoritesContainer = document.getElementById('favoritesContainer');
    const favoritesClose = document.getElementById('favoritesClose');

    // Open the favorites modal when the heart icon is clicked
    heartIcon.addEventListener('click', () => {
        // Clear the container before adding items
        favoritesContainer.innerHTML = '';

    if (favoritedProducts.length === 0) {
        favoritesContainer.innerHTML = '<p>No favorites yet.</p>';
    } else {
        favoritedProducts.forEach(productId => {
            const product = products.find(p => p.id === productId);
            const favoriteItem = document.createElement('div');
            favoriteItem.style.display = 'flex';
            favoriteItem.style.alignItems = 'center';
            favoriteItem.style.marginBottom = '15px';

            favoriteItem.innerHTML = `
                <img src="${product.image}" alt="${product.name}" style="width: 60px; height: 60px; object-fit: cover; margin-right: 10px; border-radius: 5px;">
                <div>
                    <h4 style="margin: 0;">${product.name}</h4>
                    <p style="margin: 0;">${product.price}</p>
                </div>
            `;

            favoritesContainer.appendChild(favoriteItem);
        });
    }

    favoritesModal.style.display = 'block';
});

    // Close the favorites modal when the close button is clicked
    favoritesClose.addEventListener('click', () => {
        favoritesModal.style.display = 'none';
    });

    // Close the modal if the user clicks outside of the modal content
    window.addEventListener('click', (event) => {
        if (event.target === favoritesModal) {
            favoritesModal.style.display = 'none';
        }
    });

    // ABOUT CART MODAL ICON

    const cartIcon = document.querySelector('.fa-cart-shopping');
    const cartModal = document.getElementById('cartModal');
    const cartContainer = document.getElementById('cartContainer');
    const cartClose = document.getElementById('cartClose');

let cartItems = [];

    // Function to update the cart modal content
const updateCartModal = () => {
    cartContainer.innerHTML = '';  // Clear the previous cart items
    let totalAmount = 0;  // Variable to keep track of the total amount

    if (cartItems.length === 0) {
        cartContainer.innerHTML = '<p>No items in the cart.</p>';  // If the cart is empty
    } else {
        // Loop through each item in the cart and display it
        cartItems.forEach(item => {
            totalAmount += item.totalPrice;  // Add the item total to the totalAmount

            const cartItem = document.createElement('div');
            cartItem.style.display = 'flex';
            cartItem.style.alignItems = 'center';
            cartItem.style.marginBottom = '15px';

            cartItem.innerHTML = `
                <img src="${item.image}" alt="${item.name}" style="width: 60px; height: 60px; object-fit: cover; margin-right: 10px; border-radius: 5px;">
                <div>
                    <h4 style="margin: 0;">${item.name}</h4>
                    <p style="margin: 0;">${item.price} x ${item.quantity}</p>
                </div>
            `;

            cartContainer.appendChild(cartItem);  // Add the item to the cart modal
        });
    }

    // Display the overall total at the bottom
    document.getElementById('cartTotal').textContent = `₱${totalAmount.toFixed(2)}`;  // Total of all items
};

// Function to update the cart icon badge to show the number of items in the cart
const updateCartBadge = () => {
    const cartBadge = document.querySelector('.cart-badge');
    const totalItems = cartItems.reduce((total, item) => total + item.quantity, 0);  // Calculate total items
    cartBadge.textContent = totalItems;  // Update the cart icon badge
};


    // Open the cart modal when the cart icon is clicked
    cartIcon.addEventListener('click', () => {
        updateCartModal();
        cartModal.style.display = 'block';
    });

    // Close the cart modal when the close button is clicked
    cartClose.addEventListener('click', () => {
        cartModal.style.display = 'none';
    });

    // Close the modal if the user clicks outside of the modal content
    window.addEventListener('click', (event) => {
        if (event.target === cartModal) {
            cartModal.style.display = 'none';
        }
    });

    // Add "Add to Cart" button functionality
    document.querySelectorAll('.btn.add-cart').forEach((button, index) => {
        button.addEventListener('click', () => {
            const quantityInput = document.getElementById(`quantity-${products[index].id}`);
            const quantity = parseInt(quantityInput.value);
            const product = products[index];
            
            // Add product to cart
            const cartItem = {
                ...product,
                quantity: quantity,
                totalPrice: parseFloat(product.price.replace('₱', '').replace(',', '')) * quantity
            };

        // Check if the product is already in the cart
        const existingItemIndex = cartItems.findIndex(item => item.id === product.id);
        if (existingItemIndex !== -1) {
            cartItems[existingItemIndex].quantity += quantity;  // Increase quantity if product already in cart
            cartItems[existingItemIndex].totalPrice = cartItems[existingItemIndex].quantity * parseFloat(product.price.replace('₱', '').replace(',', ''));
        } else {
            cartItems.push(cartItem);
        }

        updateCartModal();  // Update the cart modal
        updateCartBadge();  // Update cart icon badge
    });
});

    // validation
    const quantityInput = document.getElementById('productQuantity');

    // Ensure the quantity is at least 1
    quantityInput.addEventListener('change', function() {
        if (quantityInput.value < 1) {
            quantityInput.value = 1;
        }
    });

// Handle Cart Updates
document.getElementById('addToCartBtn').addEventListener('click', function() {
    const quantityInput = document.getElementById('productQuantity');
    const cartQuantity = document.getElementById('cartQuantity');

    // Get the current quantity value
    const addedQuantity = parseInt(quantityInput.value) || 0;

    // Get the existing quantity in the cart
    const currentCartQuantity = parseInt(cartQuantity.textContent) || 0;

    // Update the cart quantity
    const newCartQuantity = currentCartQuantity + addedQuantity;
    cartQuantity.textContent = newCartQuantity;

    // Reset the input value (optional)
    quantityInput.value = 1;
});
</script>
</body>
</html>